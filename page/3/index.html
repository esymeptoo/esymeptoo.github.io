<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>周小e丶的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="周小e丶的博客">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="周小e丶的博客">
<meta property="og:locale">
<meta property="article:author" content="周小e丶">
<meta property="article:tag" content="前端、吹比">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="周小e丶的博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">周小e丶的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">coding...</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Suche"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-探索vue-lazyload(一)" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/12/%E6%8E%A2%E7%B4%A2vue-lazyload(%E4%B8%80)/" class="article-date">
  <time class="dt-published" datetime="2019-01-12T05:36:29.000Z" itemprop="datePublished">2019-01-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/12/%E6%8E%A2%E7%B4%A2vue-lazyload(%E4%B8%80)/">探索vue-lazyload</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="有关vue的自定义指令"><a href="#有关vue的自定义指令" class="headerlink" title="有关vue的自定义指令"></a>有关vue的自定义指令</h3><ul>
<li>生命周期[<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/custom-directive.html]">https://cn.vuejs.org/v2/guide/custom-directive.html]</a></li>
</ul>
<h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><pre><code>  对页面加载速度影响最大的就是图片，一张普通的图片可以达到几M的大小，
而代码也许就只有几十KB。当页面图片很多时，页面的加载速度缓慢，
几S钟内页面没有加载完成，也许会失去很多的用户。
  所以，对于图片过多的页面，为了加速页面加载速度，所以很多时候我们
需要将页面内未出现在可视区域内的图片先不做加载， 等到滚动到可视区
域后再去加载。这样子对于页面加载性能上会有很大的提升，也提高了用户体验。
</code></pre>
<h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><pre><code>  页面加载时将img标签中的src属性指向一张默认图片或者指向空并且设置高度，
然后定义data-src属性指向真实的图片地址。
  例如: &lt;img src=&quot;default.jpg&quot; data-src=&quot;http://xxxxx.jpg&quot; /&gt;
  对屏幕滚动事件进行监听，判断哪些图片是暴露在视野里的将图片的src指向
原来data-src指向的图片地址，就能实现简单的图片懒加载了
</code></pre>
<h4 id="vue-lazyload实现"><a href="#vue-lazyload实现" class="headerlink" title="vue-lazyload实现"></a>vue-lazyload实现</h4><ul>
<li>index.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 既然是命令就需要使用加载指令的操作 先看install部分的代码</span></span><br><span class="line"><span class="comment">* 这部分代码声明了一个LazyClass和LazyContainer的实例,然后判断了当前vue的版本</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">LazyClass</span> = <span class="title class_">Lazy</span>(<span class="title class_">Vue</span>)</span><br><span class="line"><span class="keyword">const</span> lazy = <span class="keyword">new</span> <span class="title class_">LazyClass</span>(options)</span><br><span class="line"><span class="keyword">const</span> lazyContainer = <span class="keyword">new</span> <span class="title class_">LazyContainer</span>(&#123; lazy &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isVue2 = <span class="title class_">Vue</span>.<span class="property">version</span>.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>] === <span class="string">&#x27;2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$Lazyload</span> = lazy</span><br><span class="line">   </span><br><span class="line"><span class="comment">// 允许用户通过组件的方式实现懒加载</span></span><br><span class="line"><span class="keyword">if</span> (options.<span class="property">lazyComponent</span>) &#123;</span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;lazy-component&#x27;</span>, <span class="title class_">LazyComponent</span>(lazy))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (options.<span class="property">lazyImage</span>) &#123;</span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;lazy-image&#x27;</span>, <span class="title class_">LazyImage</span>(lazy))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>lazy.js</li>
</ul>
<h4 id="先看构造函数"><a href="#先看构造函数" class="headerlink" title="先看构造函数"></a>先看构造函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">constructor</span> (<span class="params">&#123; preLoad, error, throttleWait, preLoadTop, dispatchEvent, loading, attempt, silent = <span class="literal">true</span>, scale, listenEvents, hasbind, filter, adapter, observer, observerOptions &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">version</span> = <span class="string">&#x27;__VUE_LAZYLOAD_VERSION__&#x27;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">mode</span> = modeType.<span class="property">event</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ListenerQueue</span> = []</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">TargetIndex</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">TargetQueue</span> = []</span><br><span class="line">    <span class="comment">// 初始化实例参数</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">options</span> = &#123;</span><br><span class="line">      <span class="attr">silent</span>: silent,</span><br><span class="line">      <span class="attr">dispatchEvent</span>: !!dispatchEvent,</span><br><span class="line">      <span class="attr">throttleWait</span>: throttleWait || <span class="number">200</span>,</span><br><span class="line">      <span class="attr">preLoad</span>: preLoad || <span class="number">1.3</span>,</span><br><span class="line">      <span class="attr">preLoadTop</span>: preLoadTop || <span class="number">0</span>,</span><br><span class="line">      <span class="attr">error</span>: error || <span class="variable constant_">DEFAULT_URL</span>,</span><br><span class="line">      <span class="attr">loading</span>: loading || <span class="variable constant_">DEFAULT_URL</span>,</span><br><span class="line">      <span class="attr">attempt</span>: attempt || <span class="number">3</span>,</span><br><span class="line">      <span class="attr">scale</span>: scale || <span class="title function_">getDPR</span>(scale),</span><br><span class="line">      <span class="title class_">ListenEvents</span>: listenEvents || <span class="variable constant_">DEFAULT_EVENTS</span>,</span><br><span class="line">      <span class="attr">hasbind</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">supportWebp</span>: <span class="title function_">supportWebp</span>(),</span><br><span class="line">      <span class="attr">filter</span>: filter || &#123;&#125;,</span><br><span class="line">      <span class="attr">adapter</span>: adapter || &#123;&#125;,</span><br><span class="line">      <span class="attr">observer</span>: !!observer,</span><br><span class="line">      <span class="attr">observerOptions</span>: observerOptions || <span class="variable constant_">DEFAULT_OBSERVER_OPTIONS</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 注册事件 on、emit、remove、once等</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">_initEvent</span>()</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">lazyLoadHandler</span> = <span class="title function_">throttle</span>(<span class="variable language_">this</span>.<span class="property">_lazyLoadHandler</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>), <span class="variable language_">this</span>.<span class="property">options</span>.<span class="property">throttleWait</span>)</span><br><span class="line">    <span class="comment">// 设置监测模式 addEventListener/IntersectionObserver Api 这个后面再讲</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setMode</span>(<span class="variable language_">this</span>.<span class="property">options</span>.<span class="property">observer</span> ? modeType.<span class="property">observer</span> : modeType.<span class="property">event</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="lazyLoadHandler"><a href="#lazyLoadHandler" class="headerlink" title="_lazyLoadHandler"></a>_lazyLoadHandler</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 这是event模式下触发懒加载的核心功能</span></span><br><span class="line"><span class="comment">* 遍历懒加载节点队列 将已经加载移除 没有加载的先判断是否在视野范围内 在就执行listener.load()进行加载</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">  <span class="title function_">_lazyLoadHandler</span> () &#123;</span><br><span class="line">      <span class="keyword">const</span> freeList = []</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">ListenerQueue</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">listener, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!listener.<span class="property">state</span>.<span class="property">error</span> &amp;&amp; listener.<span class="property">state</span>.<span class="property">loaded</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> freeList.<span class="title function_">push</span>(listener)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 判断该节点是否在视野内</span></span><br><span class="line">        <span class="comment">// checkInView是ReactiveListener实例的方法</span></span><br><span class="line">        <span class="comment">// 用于判断元素是否在视野里 这里就不作介绍了</span></span><br><span class="line">        <span class="keyword">const</span> catIn = listener.<span class="title function_">checkInView</span>()</span><br><span class="line">        <span class="keyword">if</span> (!catIn) <span class="keyword">return</span></span><br><span class="line">        listener.<span class="title function_">load</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">      freeList.<span class="title function_">forEach</span>(<span class="function"><span class="params">vm</span> =&gt;</span> <span class="title function_">remove</span>(<span class="variable language_">this</span>.<span class="property">ListenerQueue</span>, vm))</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>那么问题来了，这个listener到底是何方神圣呢?<br>在解释这个问题之前我们先看看setMode做了什么事情 这牵扯到另一个核心代码</p>
<h4 id="setMode"><a href="#setMode" class="headerlink" title="setMode"></a>setMode</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 这是个初始化事件模式的函数 选择监听父节点的方式</span></span><br><span class="line"><span class="comment">* mode接收两个值  event | observer</span></span><br><span class="line"><span class="comment">* event模式指使用addEventListener方式做监听</span></span><br><span class="line"><span class="comment">* observer模式使用浏览器IntersectionObserver Api做监听事件 前提是浏览器得支持这个Api</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">setMode</span> (mode) &#123;</span><br><span class="line">  <span class="comment">// 兼容操作 如果浏览器不支持IntersectionObserver Api 就使用event模式</span></span><br><span class="line">    <span class="keyword">if</span> (!hasIntersectionObserver &amp;&amp; mode === modeType.<span class="property">observer</span>) &#123;</span><br><span class="line">      mode = modeType.<span class="property">event</span></span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">mode</span> = mode <span class="comment">// event or observer</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment">// event模式</span></span><br><span class="line">    <span class="keyword">if</span> (mode === modeType.<span class="property">event</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">_observer</span>) &#123;</span><br><span class="line">        <span class="comment">// 移除已经存在的observer模式的监听事件</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">ListenerQueue</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">listener</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">_observer</span>.<span class="title function_">unobserve</span>(listener.<span class="property">el</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_observer</span> = <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 重新注册event模式的监听事件</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">TargetQueue</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">target</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">_initListen</span>(target.<span class="property">el</span>, <span class="literal">true</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 移除event模式的监听事件</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">TargetQueue</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">target</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">_initListen</span>(target.<span class="property">el</span>, <span class="literal">false</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// 注册observer模式的监听</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">_initIntersectionObserver</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="initIntersectionObserver"><a href="#initIntersectionObserver" class="headerlink" title="_initIntersectionObserver"></a>_initIntersectionObserver</h4><p>See: [<a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2016/11/intersectionobserver_api.html]">http://www.ruanyifeng.com/blog/2016/11/intersectionobserver_api.html]</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 为每个绑定指令并且选择了observer模式的节点绑定状态监听事件 并使用_observerHandler作为监听回调</span></span><br><span class="line"><span class="comment">* 这里涉及到IntersectionObserver Api</span></span><br><span class="line"><span class="comment">* 作者对此api做了浏览器兼容判断 并将isIntersecting这个属性与intersectionRatio做了代理</span></span><br><span class="line"><span class="comment">* 个人猜测isIntersecting更好理解吧</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">_initIntersectionObserver</span> () &#123;</span><br><span class="line">      <span class="keyword">if</span> (!hasIntersectionObserver) <span class="keyword">return</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">_observer</span> = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(<span class="variable language_">this</span>.<span class="property">_observerHandler</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>), <span class="variable language_">this</span>.<span class="property">options</span>.<span class="property">observerOptions</span>)</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">ListenerQueue</span>.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">ListenerQueue</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">listener</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">_observer</span>.<span class="title function_">observe</span>(listener.<span class="property">el</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* entries表示的是被检测到发生可见性变化的节点 可能会有多个</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">_observerHandler</span> (entries, observer) &#123;</span><br><span class="line">      entries.<span class="title function_">forEach</span>(<span class="function"><span class="params">entry</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 如果节点在页面存在可见部分</span></span><br><span class="line">        <span class="keyword">if</span> (entry.<span class="property">isIntersecting</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">ListenerQueue</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">listener</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 找到目标节点</span></span><br><span class="line">            <span class="keyword">if</span> (listener.<span class="property">el</span> === entry.<span class="property">target</span>) &#123;</span><br><span class="line">              <span class="comment">// 如果图片已经加载 取消对改节点的监听</span></span><br><span class="line">              <span class="keyword">if</span> (listener.<span class="property">state</span>.<span class="property">loaded</span>) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_observer</span>.<span class="title function_">unobserve</span>(listener.<span class="property">el</span>)</span><br><span class="line">              <span class="comment">// 加载图片</span></span><br><span class="line">              listener.<span class="title function_">load</span>()</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="下面就看看指令周期内的做了什么-上代码"><a href="#下面就看看指令周期内的做了什么-上代码" class="headerlink" title="下面就看看指令周期内的做了什么? 上代码!!!"></a>下面就看看指令周期内的做了什么? 上代码!!!</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;lazy&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">bind</span>: lazy.<span class="property">add</span>.<span class="title function_">bind</span>(lazy),</span><br><span class="line">  <span class="attr">update</span>: lazy.<span class="property">update</span>.<span class="title function_">bind</span>(lazy),</span><br><span class="line">  <span class="attr">componentUpdated</span>: lazy.<span class="property">lazyLoadHandler</span>.<span class="title function_">bind</span>(lazy),</span><br><span class="line">  <span class="attr">unbind</span>: lazy.<span class="property">remove</span>.<span class="title function_">bind</span>(lazy)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;lazy-container&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">bind</span>: lazyContainer.<span class="property">bind</span>.<span class="title function_">bind</span>(lazyContainer),</span><br><span class="line">  <span class="attr">componentUpdated</span>: lazyContainer.<span class="property">update</span>.<span class="title function_">bind</span>(lazyContainer),</span><br><span class="line">  <span class="attr">unbind</span>: lazyContainer.<span class="property">unbind</span>.<span class="title function_">bind</span>(lazyContainer)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 指令第一次被绑定到节点上触发了bind，我们看看lazy.add</span></span><br></pre></td></tr></table></figure>

<h4 id="lazy-add"><a href="#lazy-add" class="headerlink" title="lazy.add"></a>lazy.add</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 指令绑定的时候出发的操作</span></span><br><span class="line"><span class="comment">* 先判断该节点时候已经在监听队列 在的话就执行update</span></span><br><span class="line"><span class="comment">* 判断用户是否单独添加了loading和error 没有就是用默认值</span></span><br><span class="line"><span class="comment">* 递归向上寻找带有scroll:auto的父节点 没有就用window</span></span><br><span class="line"><span class="comment">* 声明一个ReactiveListener实例 添加到ListenerQueue</span></span><br><span class="line"><span class="comment">* 为找到的父节点和window分别创建监听事件</span></span><br><span class="line"><span class="comment">* 手动触发使第一批图片加载</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">add</span> (el, binding, vnode) &#123;</span><br><span class="line">    <span class="comment">// 判断该节点的监听是否已经存在 有就执行update操作 update下面会讲到</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">some</span>(<span class="variable language_">this</span>.<span class="property">ListenerQueue</span>, <span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">el</span> === el)) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">update</span>(el, binding)</span><br><span class="line">      <span class="comment">// 更新后手动执行一次</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Vue</span>.<span class="title function_">nextTick</span>(<span class="variable language_">this</span>.<span class="property">lazyLoadHandler</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> &#123; src, loading, error &#125; = <span class="variable language_">this</span>.<span class="title function_">_valueFormatter</span>(binding.<span class="property">value</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      src = <span class="title function_">getBestSelectionFromSrcset</span>(el, <span class="variable language_">this</span>.<span class="property">options</span>.<span class="property">scale</span>) || src</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 支持observer模式</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">_observer</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">_observer</span>.<span class="title function_">observe</span>(el)</span><br><span class="line">        </span><br><span class="line">      <span class="keyword">const</span> container = <span class="title class_">Object</span>.<span class="title function_">keys</span>(binding.<span class="property">modifiers</span>)[<span class="number">0</span>]</span><br><span class="line">      <span class="keyword">let</span> $parent</span><br><span class="line">        </span><br><span class="line">      <span class="keyword">if</span> (container) &#123;</span><br><span class="line">        $parent = vnode.<span class="property">context</span>.<span class="property">$refs</span>[container]</span><br><span class="line">        <span class="comment">// if there is container passed in, try ref first, then fallback to getElementById to support the original usage</span></span><br><span class="line">        $parent = $parent ? $parent.<span class="property">$el</span> || $parent : <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(container)</span><br><span class="line">      &#125;</span><br><span class="line">        </span><br><span class="line">      <span class="keyword">if</span> (!$parent) &#123;</span><br><span class="line">        <span class="comment">// 递归寻找含有scroll: auto的父组件</span></span><br><span class="line">        $parent = <span class="title function_">scrollParent</span>(el)</span><br><span class="line">      &#125;</span><br><span class="line">        </span><br><span class="line">      <span class="comment">// 为其父组件注册监听事件</span></span><br><span class="line">      <span class="comment">// bindType是指绑定的类型 是用src的形式还是使用background-image的方式</span></span><br><span class="line">      <span class="keyword">const</span> newListener = <span class="keyword">new</span> <span class="title class_">ReactiveListener</span>(&#123;</span><br><span class="line">        <span class="attr">bindType</span>: binding.<span class="property">arg</span>,</span><br><span class="line">        $parent,</span><br><span class="line">        el,</span><br><span class="line">        loading,</span><br><span class="line">        error,</span><br><span class="line">        src,</span><br><span class="line">        <span class="attr">elRenderer</span>: <span class="variable language_">this</span>.<span class="property">_elRenderer</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>),</span><br><span class="line">        <span class="attr">options</span>: <span class="variable language_">this</span>.<span class="property">options</span></span><br><span class="line">      &#125;)</span><br><span class="line">        </span><br><span class="line">      <span class="comment">// ListenerQueue存在所有执行add操作的指令</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">ListenerQueue</span>.<span class="title function_">push</span>(newListener)</span><br><span class="line">        </span><br><span class="line">      <span class="comment">// 添加监听事件</span></span><br><span class="line">      <span class="keyword">if</span> (inBrowser) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">_addListenerTarget</span>(<span class="variable language_">window</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">_addListenerTarget</span>($parent)</span><br><span class="line">      &#125;</span><br><span class="line">        </span><br><span class="line">      <span class="comment">// 为了加载滑动过程中节流中间的图片</span></span><br><span class="line">      <span class="comment">// 手动触发第一屏(未滑动时需要加载的图片)</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">lazyLoadHandler</span>()</span><br><span class="line">      <span class="comment">// 这一步不知道是为啥 至今没想明白</span></span><br><span class="line">      <span class="title class_">Vue</span>.<span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">lazyLoadHandler</span>())</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ReactiveListener"><a href="#ReactiveListener" class="headerlink" title="ReactiveListener"></a>ReactiveListener</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 初始化一些参数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">constructor</span> (<span class="params">&#123; el, src, error, loading, bindType, $parent, options, elRenderer &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">el</span> = el</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">src</span> = src</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">error</span> = error</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">loading</span> = loading</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bindType</span> = bindType</span><br><span class="line">    <span class="comment">// 图片加载错误重试的次数</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">attempt</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">naturalHeight</span> = <span class="number">0</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">naturalWidth</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">options</span> = options</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rect</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$parent</span> = $parent</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">elRenderer</span> = elRenderer</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">performanceData</span> = &#123;</span><br><span class="line">      <span class="attr">init</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(),</span><br><span class="line">      <span class="attr">loadStart</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">loadEnd</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 自定义过滤事件 这个代码很好理解</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">filter</span>()</span><br><span class="line">    <span class="comment">// 给每个listener设置状态 error/loaded/rendered</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">initState</span>()</span><br><span class="line">    <span class="comment">// 这里间接调用的是 lazy._elRenderer下面会讲到</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">render</span>(<span class="string">&#x27;loading&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="lazy-elRenderer"><a href="#lazy-elRenderer" class="headerlink" title="lazy._elRenderer"></a>lazy._elRenderer</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">_elRenderer</span> (listener, state, cache) &#123;</span><br><span class="line">     <span class="keyword">if</span> (!listener.<span class="property">el</span>) <span class="keyword">return</span></span><br><span class="line">     <span class="keyword">const</span> &#123; el, bindType &#125; = listener</span><br><span class="line">          </span><br><span class="line">     <span class="keyword">let</span> src</span><br><span class="line">     <span class="comment">// 选择当前状态需要加载的图片</span></span><br><span class="line">     <span class="keyword">switch</span> (state) &#123;</span><br><span class="line">       <span class="keyword">case</span> <span class="string">&#x27;loading&#x27;</span>:</span><br><span class="line">         src = listener.<span class="property">loading</span></span><br><span class="line">         <span class="keyword">break</span></span><br><span class="line">       <span class="keyword">case</span> <span class="string">&#x27;error&#x27;</span>:</span><br><span class="line">         src = listener.<span class="property">error</span></span><br><span class="line">         <span class="keyword">break</span></span><br><span class="line">       <span class="comment">// loaded</span></span><br><span class="line">       <span class="attr">default</span>:</span><br><span class="line">         src = listener.<span class="property">src</span></span><br><span class="line">         <span class="keyword">break</span></span><br><span class="line">     &#125;</span><br><span class="line">     </span><br><span class="line">     <span class="comment">// 通过css还是src展示图片</span></span><br><span class="line">     <span class="keyword">if</span> (bindType) &#123;</span><br><span class="line">       el.<span class="property">style</span>[bindType] = <span class="string">&#x27;url(&quot;&#x27;</span> + src + <span class="string">&#x27;&quot;)&#x27;</span></span><br><span class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (el.<span class="title function_">getAttribute</span>(<span class="string">&#x27;src&#x27;</span>) !== src) &#123;</span><br><span class="line">       el.<span class="title function_">setAttribute</span>(<span class="string">&#x27;src&#x27;</span>, src)</span><br><span class="line">     &#125;</span><br><span class="line">          </span><br><span class="line">     <span class="comment">// 这一步是为了给css加个选择器</span></span><br><span class="line">     el.<span class="title function_">setAttribute</span>(<span class="string">&#x27;lazy&#x27;</span>, state)</span><br><span class="line">          </span><br><span class="line">     <span class="variable language_">this</span>.$emit(state, listener, cache)</span><br><span class="line">     <span class="comment">// 触发adapter事件</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">options</span>.<span class="property">adapter</span>[state] &amp;&amp; <span class="variable language_">this</span>.<span class="property">options</span>.<span class="property">adapter</span>[state](listener, <span class="variable language_">this</span>.<span class="property">options</span>)</span><br><span class="line">          </span><br><span class="line">     <span class="comment">// 触发自定义事件</span></span><br><span class="line">     <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">options</span>.<span class="property">dispatchEvent</span>) &#123;</span><br><span class="line">       <span class="keyword">const</span> event = <span class="keyword">new</span> <span class="title class_">CustomEvent</span>(state, &#123;</span><br><span class="line">         <span class="attr">detail</span>: listener</span><br><span class="line">       &#125;)</span><br><span class="line">       el.<span class="title function_">dispatchEvent</span>(event)</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="lazy-addListenerTarget"><a href="#lazy-addListenerTarget" class="headerlink" title="lazy._addListenerTarget"></a>lazy._addListenerTarget</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 这是给懒加载节点的父节点或者window添加监听事件的函数的方法</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">_addListenerTarget</span> (el) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!el) <span class="keyword">return</span></span><br><span class="line">      <span class="keyword">let</span> target = <span class="title function_">find</span>(<span class="variable language_">this</span>.<span class="property">TargetQueue</span>, <span class="function"><span class="params">target</span> =&gt;</span> target.<span class="property">el</span> === el)</span><br><span class="line">      <span class="keyword">if</span> (!target) &#123;</span><br><span class="line">        <span class="comment">// childrenCount代表该节点下需要懒加载的子节点数</span></span><br><span class="line">        target = &#123;</span><br><span class="line">          <span class="attr">el</span>: el,</span><br><span class="line">          <span class="attr">id</span>: ++<span class="variable language_">this</span>.<span class="property">TargetIndex</span>,</span><br><span class="line">          <span class="attr">childrenCount</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="attr">listened</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">mode</span> === modeType.<span class="property">event</span> &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">_initListen</span>(target.<span class="property">el</span>, <span class="literal">true</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">TargetQueue</span>.<span class="title function_">push</span>(target)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        target.<span class="property">childrenCount</span>++</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">TargetIndex</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>本章重点主要是在对于Lazy类的解读,作者实现的思路极为巧妙，而且将dom操作的逻辑和状态更新的逻辑拆开，很直观，<br>而且涉及到很多浏览器兼容性的处理考虑的比较全面，还是很值得学习的.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/12/%E6%8E%A2%E7%B4%A2vue-lazyload(%E4%B8%80)/" data-id="cm54s5dpv000yk5hga9wb8muo" data-title="探索vue-lazyload" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue%E3%80%81lazyload/" rel="tag">vue、lazyload</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-函数节流和防抖" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/12/13/%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81%E5%92%8C%E9%98%B2%E6%8A%96/" class="article-date">
  <time class="dt-published" datetime="2018-12-13T08:12:03.000Z" itemprop="datePublished">2018-12-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/12/13/%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81%E5%92%8C%E9%98%B2%E6%8A%96/">函数节流和防抖</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="函数节流"><a href="#函数节流" class="headerlink" title="函数节流"></a>函数节流</h4><p>节流: 固定时间内只触发第一次操作</p>
<ul>
<li>举个🌰: <blockquote>
<ol>
<li>操作A触发, 直接执行A</li>
<li>来了操作B， 如果B和A的时间间隔大于等于节流间隔，从1开始</li>
<li>如果B和A的时间间隔小于节流间隔，设置操作B的定时器 此时timeout有值 直到B运行结束 timeout失效</li>
<li>来了操作C，如果timeout还在 return 如果timeout失效了 从1开始</li>
</ol>
</blockquote>
</li>
</ul>
<p> 简单的说就是 节流就是固定时间内只执行第一次的操作 已经设置好的定时器必须执行</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span> (<span class="params">action, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timeout = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">let</span> lastRun = <span class="number">0</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (timeout) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> elapsed = <span class="title class_">Date</span>.<span class="title function_">now</span>() - lastRun</span><br><span class="line">    <span class="keyword">let</span> context = <span class="variable language_">this</span></span><br><span class="line">    <span class="keyword">let</span> args = <span class="variable language_">arguments</span></span><br><span class="line">    <span class="keyword">let</span> runCallback = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      lastRun = <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">      timeout = <span class="literal">false</span></span><br><span class="line">      action.<span class="title function_">apply</span>(context, args)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (elapsed &gt;= delay) &#123;</span><br><span class="line">      <span class="title function_">runCallback</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timeout)</span><br><span class="line">      timeout = <span class="built_in">setTimeout</span>(runCallback, delay)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="函数防抖"><a href="#函数防抖" class="headerlink" title="函数防抖"></a>函数防抖</h4><p>防抖：每个固定时间间隔段内执行最后一次</p>
<pre><code>&gt; 1. 操作A来了， 设置定时器
&gt; 2. 操作B来了， 取消上一个定时器 设置B的定时器
</code></pre>
<p>简单的说就是操作间距少于防抖间隔的时候 使用新的定时器代替旧的 达到只执行后一次操作的作用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timeout</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> context = <span class="variable language_">this</span></span><br><span class="line">    <span class="keyword">const</span> cb = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.<span class="title function_">apply</span>(context, args)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timeout)</span><br><span class="line">    timeout = <span class="built_in">setTimeout</span>(cb, delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>两者都是性能优化的选择，不同的是节流不会打破已设置好的定时器内容 防抖则会使用的新的定时器代替旧的</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/12/13/%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81%E5%92%8C%E9%98%B2%E6%8A%96/" data-id="cm54s5dpt000lk5hg69u3eokx" data-title="函数节流和防抖" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/" rel="tag">js</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-vue生命周期" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/04/01/vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" class="article-date">
  <time class="dt-published" datetime="2018-04-01T07:21:35.000Z" itemprop="datePublished">2018-04-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/04/01/vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/">vue生命周期</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="vue生命周期-几个钩子函数的区别"><a href="#vue生命周期-几个钩子函数的区别" class="headerlink" title="vue生命周期(几个钩子函数的区别)"></a>vue生命周期(几个钩子函数的区别)</h4><p>先看一张图<br><img src="https://image-static.segmentfault.com/350/409/3504099265-580628fd03258_articlex" alt="vue"></p>
<ul>
<li>vue周期的执行顺序如下:<ol>
<li>beforeCreate<br>  字面意思，组件创建之前 已经完成了初始化事件等<br>  此时还不能访问到data里的数据 因此不能在这个钩子里执行渲染逻辑(api或者data赋值操作)</li>
<li>data<br>  初始化data的过程</li>
<li>provide</li>
<li>created<br>  此时已经能够访问data template还没有编译好</li>
<li>beforeMount<br>  已完成模板数据装载 但是还没有$el</li>
<li>mounted<br>  已将模板渲染到节点上 此时才有$el 可以进行dom操作</li>
<li>beforeUpdate</li>
<li>updated</li>
<li>beforeDestroy</li>
<li>destroyed</li>
</ol>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/04/01/vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" data-id="cm54s5dps000hk5hg4ru46mbz" data-title="vue生命周期" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue%E3%80%81%E7%AC%94%E8%AE%B0/" rel="tag">vue、笔记</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-vue-provide-inject" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/04/01/vue-provide-inject/" class="article-date">
  <time class="dt-published" datetime="2018-04-01T07:02:07.000Z" itemprop="datePublished">2018-04-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/04/01/vue-provide-inject/">vue-provide/inject</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="provide-inject"><a href="#provide-inject" class="headerlink" title="provide&#x2F;inject"></a>provide&#x2F;inject</h3><p>provide和inject也是组件之间进行交互的一种策略 类似react的Context Api 祖组件将数据通过provide一层一层往下传</p>
<ul>
<li>provide可以接受方法或者属性对象集合 如果是集合 作用域不能指向自身的vue实例 </li>
<li>inject接收数组或者属性对象集合</li>
</ul>
<h4 id="举个🌰-我们列举三个组件-祖先、父组件、子组件"><a href="#举个🌰-我们列举三个组件-祖先、父组件、子组件" class="headerlink" title="举个🌰 我们列举三个组件  祖先、父组件、子组件"></a>举个🌰 我们列举三个组件  祖先、父组件、子组件</h4><p>grandPa.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  // provide的传递方法可以为对象也可以为函数 通常情况下如果传递的值与当前组件无关 则使用对象形式</span><br><span class="line">  provide() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      grandPa: this,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  provide: &#123;</span><br><span class="line">    grandPa: this,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>father.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  // inject用法和props类似</span><br><span class="line">  inject: [&#x27;grandPa&#x27;],</span><br><span class="line">  // 也可写成如下方式</span><br><span class="line">  inject: &#123;</span><br><span class="line">    grandPa: &#123;</span><br><span class="line">      type: Object,</span><br><span class="line">      default: () =&gt; (&#123;&#125;),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="provide的执行时机"><a href="#provide的执行时机" class="headerlink" title="provide的执行时机"></a>provide的执行时机</h4><p>provide的执行时机出于data和created之间</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/04/01/vue-provide-inject/" data-id="cm54s5dpt000mk5hgdwmwd9y6" data-title="vue-provide/inject" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-实现简单的bind函数-md" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/03/10/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84bind%E5%87%BD%E6%95%B0-md/" class="article-date">
  <time class="dt-published" datetime="2018-03-10T13:54:25.000Z" itemprop="datePublished">2018-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/03/10/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84bind%E5%87%BD%E6%95%B0-md/">实现简单的bind函数.md</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="模拟传参实现"><a href="#模拟传参实现" class="headerlink" title="模拟传参实现"></a>模拟传参实现</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">bind</span> = <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line">	<span class="keyword">const</span> bindTarget = args.<span class="title function_">shift</span>()</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args1</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> self.<span class="title function_">apply</span>(bindTarget, [...args, ...args1])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="完整版perf-加上构造函数作用域实现"><a href="#完整版perf-加上构造函数作用域实现" class="headerlink" title="完整版perf: 加上构造函数作用域实现"></a>完整版perf: 加上构造函数作用域实现</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">bind</span> = <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">bind</span> || <span class="keyword">function</span> (<span class="params">context, ...args1</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line">  <span class="keyword">const</span> fBound = <span class="keyword">function</span> (<span class="params">...args2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> self.<span class="title function_">apply</span>(context, [...args1, ...args2])</span><br><span class="line">  &#125;</span><br><span class="line">  fBound.<span class="property"><span class="keyword">prototype</span></span> = <span class="variable language_">this</span>.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line">  <span class="keyword">return</span> fBound</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/03/10/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84bind%E5%87%BD%E6%95%B0-md/" data-id="cm54s5dpu000qk5hg8w5faroy" data-title="实现简单的bind函数.md" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js%E3%80%81es6/" rel="tag">js、es6</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; zurück</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/React%E3%80%81SSR/" rel="tag">React、SSR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue2-x%E3%80%81%E6%8C%87%E4%BB%A4%E3%80%81v-model/" rel="tag">Vue2.x、指令、v-model</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Watcher%E7%AF%87/" rel="tag">Watcher篇</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker%E3%80%81node/" rel="tag">docker、node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab-ci/" rel="tag">gitlab-ci</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js%E3%80%81es6/" rel="tag">js、es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvvm/" rel="tag">mvvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs-%E9%94%81-%E5%B9%B6%E5%8F%91/" rel="tag">nodejs 锁 并发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/qiankun%E3%80%81micro-frontend/" rel="tag">qiankun、micro-frontend</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-ref-%E7%AC%94%E8%AE%B0/" rel="tag">react ref 笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redux%E3%80%81react/" rel="tag">redux、react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redux%E3%80%81react-redux/" rel="tag">redux、react-redux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue2-x%E3%80%81Observer%E3%80%81Dep%E3%80%81Watcher%E3%80%81%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0/" rel="tag">vue2.x、Observer、Dep、Watcher、个人笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuex%E3%80%81takeLatest/" rel="tag">vuex、takeLatest</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue%E3%80%81lazyload/" rel="tag">vue、lazyload</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue%E3%80%81%E7%AC%94%E8%AE%B0/" rel="tag">vue、笔记</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/React%E3%80%81SSR/" style="font-size: 10px;">React、SSR</a> <a href="/tags/Vue2-x%E3%80%81%E6%8C%87%E4%BB%A4%E3%80%81v-model/" style="font-size: 10px;">Vue2.x、指令、v-model</a> <a href="/tags/Watcher%E7%AF%87/" style="font-size: 10px;">Watcher篇</a> <a href="/tags/docker%E3%80%81node/" style="font-size: 10px;">docker、node</a> <a href="/tags/gitlab-ci/" style="font-size: 10px;">gitlab-ci</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/js%E3%80%81es6/" style="font-size: 10px;">js、es6</a> <a href="/tags/mvvm/" style="font-size: 10px;">mvvm</a> <a href="/tags/nodejs-%E9%94%81-%E5%B9%B6%E5%8F%91/" style="font-size: 10px;">nodejs 锁 并发</a> <a href="/tags/qiankun%E3%80%81micro-frontend/" style="font-size: 10px;">qiankun、micro-frontend</a> <a href="/tags/react-ref-%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">react ref 笔记</a> <a href="/tags/redux%E3%80%81react/" style="font-size: 10px;">redux、react</a> <a href="/tags/redux%E3%80%81react-redux/" style="font-size: 10px;">redux、react-redux</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/vue2-x%E3%80%81Observer%E3%80%81Dep%E3%80%81Watcher%E3%80%81%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">vue2.x、Observer、Dep、Watcher、个人笔记</a> <a href="/tags/vuex%E3%80%81takeLatest/" style="font-size: 10px;">vuex、takeLatest</a> <a href="/tags/vue%E3%80%81lazyload/" style="font-size: 10px;">vue、lazyload</a> <a href="/tags/vue%E3%80%81%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">vue、笔记</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/12/18/%E6%82%B2%E8%A7%82%E9%94%81-%E4%B9%90%E8%A7%82%E9%94%81/">悲观锁/乐观锁</a>
          </li>
        
          <li>
            <a href="/2020/11/23/qiankun%E5%BE%AE%E5%89%8D%E7%AB%AF%E5%88%9D%E6%8E%A2/">qiankun微前端实践</a>
          </li>
        
          <li>
            <a href="/2019/12/19/Vue2-x%E4%B9%8Bv-model%E8%AF%A6%E8%A7%A3/">Vue2.x之v-model详解</a>
          </li>
        
          <li>
            <a href="/2019/12/18/Vue2-x-%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94Watcher%E7%AF%87%E8%AF%A6%E8%A7%A3/">Vue2.x-数据响应Watcher篇详解</a>
          </li>
        
          <li>
            <a href="/2019/12/16/Vue2-x%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E7%AF%87/">Vue2.x之数据响应篇</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 周小e丶<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>